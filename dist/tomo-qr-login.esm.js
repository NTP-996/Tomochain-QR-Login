import e from"axios";import t from"@chenfengyuan/vue-qrcode";var n={name:"TomoQrLogin",components:{VueQrcode:t},data:function(){return{qrCode:"text"}},props:{address:{type:String,required:!0},app:{type:String,required:!0}},created:async function(){var e=this,t=this.loginByQRCode();await t&&(this.interval=setInterval(async function(){await e.getLoginResult()},3e3))},mounted:function(){},methods:{loginByQRCode:async function(){var t=(await e.get("http://9b77992e.ngrok.io/api/auth/generateLoginQR")).data;return this.id=t.id,this.message=this.app+t.message,this.qrCode=encodeURI("tomochain:login?message="+this.message+"&submitURL="+t.url),!0},getLoginResult:async function(){var t=(await e.get("http://9b77992e.ngrok.io/api/auth/getLoginResult?id="+this.id)).data;!t.error&&t&&(this.address=t.user,this.$emit("success",this.address))}}};var i=function(e,t,n,i,o,a,s,r,d,l){"boolean"!=typeof s&&(d=r,r=s,s=!1);var c,u="function"==typeof n?n.options:n;if(e&&e.render&&(u.render=e.render,u.staticRenderFns=e.staticRenderFns,u._compiled=!0,o&&(u.functional=!0)),i&&(u._scopeId=i),a?(c=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,d(e)),e&&e._registeredComponents&&e._registeredComponents.add(a)},u._ssrRegister=c):t&&(c=s?function(){t.call(this,l(this.$root.$options.shadowRoot))}:function(e){t.call(this,r(e))}),c)if(u.functional){var m=u.render;u.render=function(e,t){return c.call(t),m(e,t)}}else{var p=u.beforeCreate;u.beforeCreate=p?[].concat(p,c):[c]}return n},o="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());var a=document.head||document.getElementsByTagName("head")[0],s={};var r=i({render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"tomo-qr-login"},[t("div",{staticClass:"container"},[t("vue-qrcode",{staticClass:"img-fluid text-center text-lg-right",staticStyle:{height:"220px",width:"220px"},attrs:{options:{width:250},value:this.qrCode}})],1)])},staticRenderFns:[]},function(e){e&&e("data-v-459de381_0",{source:".tomo-qr-login[data-v-459de381]{display:block;width:400px;margin:25px auto;border:1px solid #ccc;background:#eaeaea;text-align:center;padding:25px}.tomo-qr-login p[data-v-459de381]{margin:0 0 1em}",map:void 0,media:void 0})},n,"data-v-459de381",!1,void 0,function(e){return function(e,t){return function(e,t){var n=o?t.media||"default":e,i=s[n]||(s[n]={ids:new Set,styles:[]});if(!i.ids.has(e)){i.ids.add(e);var r=t.source;if(t.map&&(r+="\n/*# sourceURL="+t.map.sources[0]+" */",r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t.map))))+" */"),i.element||(i.element=document.createElement("style"),i.element.type="text/css",t.media&&i.element.setAttribute("media",t.media),a.appendChild(i.element)),"styleSheet"in i.element)i.styles.push(r),i.element.styleSheet.cssText=i.styles.filter(Boolean).join("\n");else{var d=i.ids.size-1,l=document.createTextNode(r),c=i.element.childNodes;c[d]&&i.element.removeChild(c[d]),c.length?i.element.insertBefore(l,c[d]):i.element.appendChild(l)}}}(e,t)}},void 0);function d(e){d.installed||(d.installed=!0,e.component("TomoQrLogin",r))}var l={install:d},c=null;"undefined"!=typeof window?c=window.Vue:"undefined"!=typeof global&&(c=global.Vue),c&&c.use(l),r.install=d;export default r;
